# typescript 进阶使用
## 泛型

看一下简单的泛型例子，是一个常用的类型工具：

```ts
type MaybeNull<T> = T | null
```

`<T>` 表示泛型，看起来像类型中的参数一样，这个参数的名称是任意合法的，如可是 V、Value 等

使用这个类型工具：

[试一试](https://www.typescriptlang.org/play?target=99&jsx=0&ssl=12&ssc=20&pln=1&pc=1#code/C4TwDgpgBAsghiARhAcgVwDYYDwBUB8UAvFLlAD5QB2mGAUHRhMNWgLYBcsCy6W2NNsgBOhEjSx1BxKAEYATAGZGzKAGdgwrvCSpa2DcICWVAOZjWkwzIDkhk6ZsMTwCMIBmcAMbQACm7UAeyooAG86KGo4NgguezM6AF8VFjBtHj1+f2EgqgsJejAZUKiYrhsADyMIGyhkoA)

```ts
type MaybeNull<T> = T | null

let num: MaybeNull<number> = null
num = 123
let str: MaybeNull<string> = null
str = 'string'

interface Person {
  name: string
}
let p: MaybeNull<Person> = null
p = { name: 'xie' }
```

回到函数重载中的第一个例子：

_有一个函数 func，当接受字符串时候返回一个字符串，当接受一个字符串数组时返回一个字符串数组_

也可以用泛型的方式（但这并不代表泛型和函数重载一样，只是这个例子特殊）：

[试一试](https://www.typescriptlang.org/play?target=99&jsx=0&ssl=6&ssc=28&pln=1&pc=1#code/GYVwdgxgLglg9mABKSAeAKgPgBQEMBOA5gFyLoCUp6iA3gFCKL4CmUI+SBhiA9D4oFg5QMABgRTDAoYqALhMB52oAbnOgF86dCAgDOURADdcAGxDNEAXmTgI2AOQALZjp1xz5Otr3MAdFDgAZOAHdm+AGFcVWZscl5+AAVg1SA)
```ts
function func<T>(arg: T): T {
  return arg // 不考虑内部实现
}

const value = func('hello')
value.toLowerCase() // Pass
```

箭头函数语法，将泛型写在函数参数之前：

[试一试](https://www.typescriptlang.org/play?target=99&jsx=0&ssl=6&ssc=28&pln=1&pc=1#code/MYewdgzgLgBAZgVzMGBeGAeAKgPgBQCGATgOYBcMWAlBVmjjAN4BQMMRAplAkWDMSRgB6ITECwcoGAAwIphgUMVAFwmA87UANzswC+zZqEiwAbgQA2CDmnhJgeAOQALDvv0gLVZnsMcAdFBAAZEAHcORADCBBAceFTCogAKIRBAA)
```ts
const func = <T>(arg: T): T => {
  return arg // 不考虑内部实现
}

const value = func('hello')
value.toLowerCase() // Pass
```

### 泛型默认值

和函数参数一样，泛型参数也可以有默认值：

```ts
type Factory<T = boolean> = T | number | string
```

当不给泛型参数时，`T` 的值将会是 `boolean` 类型：

```ts
type Factory<T = boolean> = T | number | string
let foo: Factory = false // 没有给泛型参数
```

### 泛型约束

期望的泛型参数类型可以给一些约束类型：

```ts
type Result<T extends number> = T | 0
```

这里约束 `T` 必须是 `number` 的子类型，子类型暂时理解为更具体的类型，如字面量 `100` 类型一定是 `number` 类型，`number` 类型不一定是字面量 `100` 类型，使用例子：

```ts
type Result<T extends number> = T | 0

let code: Result<100> = 0 // Pass（这里的 100 是 typescript 中的数字字面量类型，不是实际的 js 值，编译后会被移除）
code = 100 // Pass
```

有一个例子：


